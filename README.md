# NFL kaggle competition


## TODO
2019/11/22

### やりたいこと

- ヤードのきわきわにいるかいないかでプレーが変わる
    - -> 10ヤード以下、90ヤード以上、それ以外

- 大幅に間違えているプレーの分析

- ボロノイ領域の面積など


- アンサンブル
　- 現状は、NNのシングル
　
     - → LGBM、RF

- 12月の試合に備えた対応

    - 2018年への対応？








-----------------------------------------


## Memo
- 評価指標
Continuous Ranked Probability Score (CRPS)
各PlayIdごとに、どのくらいヤードを進んだか、失ったかのそれぞれの確率を出す
--> それを、-99から99までの累積分布として表す（-99は99ヤード後ろに進む確率を意味する、-98は-98までの合計確率（-99と-98の合計）がのる形）


- 以前のコンペの図が分かりやすい
https://www.kaggle.com/c/second-annual-data-science-bowl/overview/evaluation

各プレーごとに、
予測した累積分布と、実績のヤード数がある
--> 実績値を閾値とするステップ関数と、累積分布との差の2乗の合計（2乗でなく単に差の合計なら、単純な積分で面積になる）

（実際の値は、累積分布としては、実績値を閾値とするステップ関数とし、その差を評価指標とする、最後はすべてのプレーの平均値として算出）


- ボールがハンドオフされたときの時刻TimeHandoffでの特徴量を使って、そのプレーで得られるヤード数を予測する
- 予測対象カラムは、"Yards"


- 提出するCDFは、どのような形にするかは議論の余地がありそう
    - https://www.kaggle.com/hukuda222/nfl-simple-evluation-trick
    - 上記カーネルでは、case1で予測値のステップ関数とする場合、case2である範囲(stdくらい？)の幅で線形に増加するタイプ、case3で、正規分布の累積分布として増加するタイプの3つを検証して、case3が最も良くなると言っている
